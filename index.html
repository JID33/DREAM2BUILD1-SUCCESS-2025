<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dream2Build1 - Inscription & Panel</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f1f1f1; }
    h1,h2 { text-align: center; color: #007BFF; }
    .container, .panel, .form-section, form {
      max-width: 900px; margin: auto; background: white; padding: 20px;
      border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    label { display: block; margin-top: 10px; font-weight: bold; }
    input, select {
      width: 100%; padding: 10px; margin-top: 5px; margin-bottom: 15px;
      border: 1px solid #ccc; border-radius: 4px;
    }
    button {
      background-color: #28a745; color: white; border: none; padding: 10px 20px;
      font-size: 16px; border-radius: 5px; cursor: pointer;
      margin-top: 10px;
    }
    button:hover { background-color: #218838; }
    .hidden { display: none; }
    .logout-btn { text-align: center; margin-top: 20px; }
    .logout-btn button { background-color: #dc3545; }
    .role-choice, .lang-select, .info-box {
      text-align: center; margin-bottom: 20px;
    }
    .cash-infos, .paiement-etapes, .merci-message {
      display: none; background: #fff3cd;
      padding: 10px; border-left: 5px solid #ffc107; margin-bottom: 20px;
    }
    .rotation-box {
      background: #e9f7ef; padding: 15px; margin-top: 20px; border-left: 5px solid #28a745;
      white-space: pre-line;
    }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { padding: 10px; border: 1px solid #ccc; text-align: center; }
    th { background-color: #007BFF; color: white; }
  </style>
</head>
<body>

<div class="lang-select">
  <label for="langSelect">Choisissez la langue / Choose Language:</label>
  <select id="langSelect" onchange="switchLang()">
    <option value="fr">Fran√ßais</option>
    <option value="en">English</option>
    <option value="ht">Krey√≤l Ayisyen</option>
  </select>
</div>

<h1 data-lang-fr="Dream2Build1 - Inscription & Panel"
    data-lang-en="Dream2Build1 - Registration & Panel"
    data-lang-ht="Dream2Build1 - Enskripsyon & Panel">Dream2Build1 - Inscription & Panel</h1>

<div class="role-choice">
  <label data-lang-fr="Choisissez votre r√¥le:"
         data-lang-en="Select your role:"
         data-lang-ht="Chwazi w√≤l ou:">Choisissez votre r√¥le:</label>
  <select id="roleSelect" onchange="switchLogin()">
    <option value="">-- Choose --</option>
    <option value="ceo">CEO</option>
    <option value="leader">Team Leader</option>
  </select>
</div>

<!-- CEO Login Section -->
<div id="ceoLogin" class="form-section hidden">
  <h2 data-lang-fr="Connexion CEO" data-lang-en="CEO Login" data-lang-ht="Koneksyon CEO">Connexion CEO</h2>
  <input type="email" id="ceoEmail" placeholder="CEO Email" />
  <input type="password" id="ceoPassword" placeholder="Password" />
  <button onclick="loginCEO()" data-lang-fr="Connexion" data-lang-en="Login" data-lang-ht="Antre">Connexion</button>
</div>

<!-- Leader Login Section -->
<div id="leaderLogin" class="form-section hidden">
  <h2 data-lang-fr="Connexion Team Leader" data-lang-en="Team Leader Login" data-lang-ht="Koneksyon Lid√® Ekip">Connexion Team Leader</h2>
  <input type="email" id="leaderEmail" placeholder="Leader Email" />
  <input type="password" id="leaderPassword" placeholder="Password" />
  <button onclick="loginLeader()" data-lang-fr="Connexion" data-lang-en="Login" data-lang-ht="Antre">Connexion</button>
</div>

<!-- Logout button, always visible when logged in -->
<div class="logout-btn hidden" id="logoutBtn">
  <button onclick="logoutUser()" data-lang-fr="D√©connexion" data-lang-en="Logout" data-lang-ht="Dekonekte">D√©connexion</button>
</div>

<!-- New Member Registration Form -->
<form id="inscriptionForm" onsubmit="return submitMember(event)">
  <h2 data-lang-fr="Inscription Nouveau Membre"
      data-lang-en="Register as New Member"
      data-lang-ht="Anrejistre k√≤m Nouvo Manm">Inscription Nouveau Membre</h2>

  <label data-lang-fr="Nom complet:" data-lang-en="Full Name:" data-lang-ht="Non konpl√®:">Nom complet:</label>
  <input name="nom" id="nom" type="text" placeholder="Jean Dupont" required />

  <label data-lang-fr="Email:" data-lang-en="Email:" data-lang-ht="Im√®l:">Email:</label>
  <input name="email" id="email" type="email" required />

  <label data-lang-fr="Code de r√©f√©rence:" data-lang-en="Reference Code:" data-lang-ht="K√≤d referans:">Code de r√©f√©rence:</label>
  <input name="ref" id="ref" type="text" readonly />

  <label data-lang-fr="Lien de r√©f√©rence:" data-lang-en="Referral Link:" data-lang-ht="Ly√®n referans:">Lien de r√©f√©rence:</label>
  <input name="lien" id="lien" type="url" placeholder="https://..." />

  <label data-lang-fr="M√©thode de paiement:" data-lang-en="Payment Method:" data-lang-ht="Met√≤d peman:">M√©thode de paiement:</label>
  <select id="paiementSelect" required onchange="checkPaiement()">
    <option value="">-- Choose --</option>
    <option value="MonCash">MonCash</option>
    <option value="PayPal">PayPal</option>
    <option value="NatCash">NatCash</option>
    <option value="Mastercard">Mastercard</option>
    <option value="Cash">Cash</option>
  </select>

  <div id="cashMessage" class="cash-infos" data-lang-fr="Vous avez choisi <strong>Cash</strong>. Contactez l'admin pour validation." data-lang-en="You chose <strong>Cash</strong>. Please contact admin to validate payment." data-lang-ht="Ou chwazi <strong>Cash</strong>. Tanpri kontakte admin pou validasyon peman.">
    Vous avez choisi <strong>Cash</strong>. Contactez l'admin pour validation.
  </div>

  <div id="paiementEtapes" class="paiement-etapes"></div>

  <div id="merciMessage" class="merci-message" data-lang-fr="‚úÖ Merci pour votre inscription. Vous √™tes sur le point de gagner avec Dream2Build1 !" data-lang-en="‚úÖ Thank you for registering. You are about to earn with Dream2Build1!" data-lang-ht="‚úÖ M√®si paske ou anrejistre. Ou pral k√≤manse touche av√®k Dream2Build1!">
    ‚úÖ Merci pour votre inscription. Vous √™tes sur le point de gagner avec Dream2Build1 !
  </div>

  <button type="submit" data-lang-fr="Payer & Soumettre" data-lang-en="Pay & Submit" data-lang-ht="Peye & Soum√®t">Payer & Soumettre</button>
</form>

<!-- CEO Panel -->
<div id="ceoPanel" class="panel hidden">
  <h2 data-lang-fr="Tableau de bord CEO" data-lang-en="CEO Dashboard" data-lang-ht="Tablo CEO">Tableau de bord CEO</h2>
  <div id="ceoContent">üìä Panel complet des membres, validations, calculs rotatifs √† venir...</div>
  <button onclick="calculRotation()" data-lang-fr="Afficher Rotation du jour" data-lang-en="Show Today's Rotation" data-lang-ht="Montre wotasyon jounen an">Afficher Rotation du jour</button>
  <button onclick="nextRotation()" data-lang-fr="‚û°Ô∏è Prochain jour" data-lang-en="Next Day" data-lang-ht="Pwochen jou">‚û°Ô∏è Prochain jour</button>
  <div id="rotationResult" class="rotation-box hidden"></div>
  <h3 data-lang-fr="Historique des 25 jours :" data-lang-en="History of 25 Days:" data-lang-ht="Istwa 25 jou yo:">Historique des 25 jours :</h3>
  <table id="historyTable">
    <thead>
      <tr>
        <th data-lang-fr="Jour" data-lang-en="Day" data-lang-ht="Jou">Jour</th>
        <th data-lang-fr="Membre" data-lang-en="Member" data-lang-ht="Manm">Membre</th>
        <th data-lang-fr="Total ($)" data-lang-en="Total ($)" data-lang-ht="Total ($)">Total ($)</th>
        <th data-lang-fr="R√©serve" data-lang-en="Reserve" data-lang-ht="Rez√®v">R√©serve</th>
        <th data-lang-fr="Retenu (10%)" data-lang-en="Deducted (10%)" data-lang-ht="Retni (10%)">Retenu (10%)</th>
        <th data-lang-fr="√Ä recevoir" data-lang-en="To Receive" data-lang-ht="Pou resevwa">√Ä recevoir</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<!-- Leader Panel -->
<div id="leaderPanel" class="panel hidden">
  <h2 data-lang-fr="Tableau de bord Leader" data-lang-en="Leader Dashboard" data-lang-ht="Tablo Lid√®">Tableau de bord Leader</h2>
  <div id="leaderContent">Chargement des membres √† valider...</div>
</div>

<script>
// === Langue ===
const langs = ['fr', 'en', 'ht'];
function switchLang() {
  const selected = document.getElementById('langSelect').value;
  langs.forEach(lang => {
    document.querySelectorAll(`[data-lang-${lang}]`).forEach(el => {
      el.style.display = (lang === selected) ? '' : 'none';
    });
  });
}
// Initial display French
switchLang();

// === Gestion affichage connexion ===
function switchLogin() {
  const role = document.getElementById('roleSelect').value;
  document.getElementById('ceoLogin').classList.toggle('hidden', role !== 'ceo');
  document.getElementById('leaderLogin').classList.toggle('hidden', role !== 'leader');
}
// === Variables simplifi√©es pour d√©mo ===
const ceoUser = { email: 'emmanuel1@d2b1.com', password: 'CEOpass123' };
const leaders = [
  { email: 'leader1@d2b1.com', password: 'Leader1pass' },
  { email: 'leader2@d2b1.com', password: 'Leader2pass' },
  // Ajoute jusqu'√† 10 leaders ici
];
let loggedInUser = null;
let loggedInRole = null;

// === Connexions ===
function loginCEO() {
  const email = document.getElementById('ceoEmail').value.trim();
  const pass = document.getElementById('ceoPassword').value.trim();
  if(email === ceoUser.email && pass === ceoUser.password) {
    loggedInUser = ceoUser.email;
    loggedInRole = 'ceo';
    showDashboard();
  } else alert('Invalid CEO credentials');
}
function loginLeader() {
  const email = document.getElementById('leaderEmail').value.trim();
  const pass = document.getElementById('leaderPassword').value.trim();
  const leader = leaders.find(l => l.email === email && l.password === pass);
  if(leader) {
    loggedInUser = leader.email;
    loggedInRole = 'leader';
    showDashboard();
  } else alert('Invalid Leader credentials');
}
// === Logout ===
function logoutUser() {
  loggedInUser = null;
  loggedInRole = null;
  document.getElementById('ceoPanel').classList.add('hidden');
  document.getElementById('leaderPanel').classList.add('hidden');
  document.getElementById('logoutBtn').classList.add('hidden');
  document.getElementById('inscriptionForm').style.display = '';
  document.getElementById('roleSelect').value = '';
  document.getElementById('ceoLogin').classList.add('hidden');
  document.getElementById('leaderLogin').classList.add('hidden');
  alert('Logged out successfully');
}
// === Affichage tableau de bord ===
function showDashboard() {
  document.getElementById('logoutBtn').classList.remove('hidden');
  document.getElementById('inscriptionForm').style.display = 'none';
  document.getElementById('roleSelect').value = '';
  document.getElementById('ceoLogin').classList.add('hidden');
  document.getElementById('leaderLogin').classList.add('hidden');
  if(loggedInRole === 'ceo') {
    document.getElementById('ceoPanel').classList.remove('hidden');
    document.getElementById('leaderPanel').classList.add('hidden');
    loadCeoContent();
  } else if(loggedInRole === 'leader') {
    document.getElementById('leaderPanel').classList.remove('hidden');
    document.getElementById('ceoPanel').classList.add('hidden');
    loadLeaderContent();
  }
}

// === Paiement ===
function checkPaiement() {
  const method = document.getElementById('paiementSelect').value;
  const cashMsg = document.getElementById('cashMessage');
  const stepsDiv = document.getElementById('paiementEtapes');
  const merciDiv = document.getElementById('merciMessage');

  cashMsg.style.display = 'none';
  stepsDiv.style.display = 'none';
  merciDiv.style.display = 'none';
  stepsDiv.innerHTML = '';

  if(method === 'Cash') {
    cashMsg.style.display = '';
  } else if(method === 'Mastercard') {
    stepsDiv.style.display = '';
    stepsDiv.innerHTML = `
      <p><strong>Mastercard Payment Steps:</strong></p>
      <label>Card Number (16 digits):</label>
      <input type="text" id="cardNumber" maxlength="16" placeholder="1234 5678 9012 3456" />
      <label>Expiry Date (MM/YY):</label>
      <input type="text" id="expiryDate" maxlength="5" placeholder="MM/YY" />
      <label>CVV (3 digits):</label>
      <input type="text" id="cvv" maxlength="3" placeholder="123" />
    `;
  } else if(method === 'PayPal') {
    stepsDiv.style.display = '';
    stepsDiv.innerHTML = `
      <p>Send payment to PayPal email: <strong>dream2build@gmail.com</strong></p>
    `;
  } else if(method === 'MonCash') {
    stepsDiv.style.display = '';
    stepsDiv.innerHTML = `
      <p>Send payment via MonCash to number: <strong>xxxxxx</strong></p>
    `;
  } else if(method === 'NatCash') {
    stepsDiv.style.display = '';
    stepsDiv.innerHTML = `
      <p>Send payment via NatCash to number: <strong>xxxxxx</strong></p>
    `;
  }
}
// === Form Submission (for demo, replace with real backend call) ===
function submitMember(e) {
  e.preventDefault();
  if(!loggedInUser) {
    alert('You must be logged in as CEO or Leader to submit registration.');
    return false;
  }
  // Validate Mastercard fields if chosen
  if(document.getElementById('paiementSelect').value === 'Mastercard') {
    const card = document.getElementById('cardNumber').value.trim();
    const expiry = document.getElementById('expiryDate').value.trim();
    const cvv = document.getElementById('cvv').value.trim();
    if(card.length !== 16 || !expiry.match(/^\d{2}\/\d{2}$/) || cvv.length !== 3) {
      alert('Please fill in valid Mastercard details.');
      return false;
    }
  }
  alert('Registration submitted! Pending admin verification.');
  // Ici on enverrait les donn√©es au backend ou Google Sheets via API
  return true;
}

// === Donn√©es d'exemple pour rotation ===
const members = [
  "Jean Dupont", "Marie Pierre", "Andr√© Michel", "Lucie Bernadette", "Josu√© Charles",
  "L√©na Joseph", "Samuel Paul", "Carine Moreau", "Diego Lopez", "Manuela Rose",
  "Alain Jean", "Sophie Nadeau", "Michel Fran√ßois", "Nadia Rigaud", "Tania Joseph",
  "Rudy Belle", "Judith Dorval", "Maxence Pr√©vost", "Claire Antoine", "Daniel Mardy",
  "Yvette Dorsainvil", "Elie Dumarsais", "Beatrice Montfort", "Fabrice Lemay", "St√©phanie Rouzier"
];
let currentIndex = new Date().getDate() - 1;

function calculRotation() {
  if (currentIndex >= members.length) return;
  const name = members[currentIndex];
  const total = 100 + (currentIndex * 30);
  const reserve = total / 3;
  const deduction = reserve * 0.10;
  const net = total - (reserve - deduction);

  document.getElementById("rotationResult").innerHTML = `
    <strong>üìÖ Jour ${currentIndex + 1} ‚Äì ${name}</strong><br>
    üí∞ Total contributions: $${total.toFixed(2)}<br>
    üì¶ Reserve (1/3): $${reserve.toFixed(2)}<br>
    üîí Retenu sp√©cial (10%): $${deduction.toFixed(2)}<br>
    ‚úÖ Montant √† recevoir: $${net.toFixed(2)}
  `;
  document.getElementById("rotationResult").classList.remove("hidden");

  const row = `<tr><td>${currentIndex + 1}</td><td>${name}</td><td>${total.toFixed(2)}</td><td>${reserve.toFixed(2)}</td><td>${deduction.toFixed(2)}</td><td>${net.toFixed(2)}</td></tr>`;
  document.querySelector("#historyTable tbody").innerHTML += row;
}

function nextRotation() {
  currentIndex++;
  calculRotation();
}

// === Auto-g√©n√©ration code r√©f√©rence ===
function generateRefCode() {
  const refInput = document.getElementById('ref');
  const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
  let code = '';
  for(let i=0; i<6; i++) {
    code += chars.charAt(Math.floor(Math.random() * chars.length));
  }
  refInput.value = code;
}
generateRefCode();

</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<script>
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'fr'}, 'google_translate_element');
}
</script>

</body>
</html>
