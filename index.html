<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Test OTP - WhatsApp & EmailJS</title>
  <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: Arial, sans-serif; background: #eef2f5; padding: 20px; }
    .card { background: white; padding: 20px; max-width: 400px; margin: auto; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    input, button { width: 100%; padding: 10px; margin-top: 10px; font-size: 16px; }
    button { background-color: #004080; color: white; border: none; cursor: pointer; }
  </style>
</head>
<body>
  <div class="card">
    <h2>Test OTP D2B1</h2>
    <input type="text" id="userName" placeholder="Votre nom">
    <button onclick="sendOTP()">üì§ Envoyer OTP</button>
    <div id="status" style="margin-top: 15px; text-align: center;"></div>
  </div>

<script>
emailjs.init("M1gXL-2NtM2UnmLXj"); // Public Key EmailJS

function sendOTP() {
  const name = document.getElementById("userName").value.trim();
  const otp = Math.floor(100000 + Math.random() * 900000).toString();
  const status = document.getElementById("status");
  status.innerText = "‚è≥ Envoi du code OTP...";

  if (!name) return alert("Entrez votre nom.");

  // Envoi par EmailJS
  emailjs.send("service_3gm6ixa", "template_tq202es", {
    name: name,
    otp: otp,
    to_email: "emmanueljeambas@gmail.com"
  }).then(function() {
    status.innerText += "\\n‚úÖ Email envoy√© avec succ√®s";
  }, function(error) {
    console.error(error);
    status.innerText += "\\n‚ùå √âchec Email : " + (error.text || JSON.stringify(error));
  });

  // Envoi par WhatsApp via CallMeBot
  fetch("https://api.callmebot.com/whatsapp.php?phone=+50943260012&text=Votre+code+OTP+D2B1+est+:+"
    + otp + "&apikey=3854603")
    .then(res => {
      if (res.ok) {
        status.innerText += "\\n‚úÖ WhatsApp envoy√© avec succ√®s";
      } else {
        status.innerText += "\\n‚ö†Ô∏è WhatsApp envoy√© (r√©ponse non standard)";
      }
    })
    .catch(err => {
      console.error(err);
      status.innerText += "\\n‚ùå √âchec WhatsApp";
    });
}
</script>
</body>
</html>
